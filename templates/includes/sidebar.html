<!-- Sidebar (Dark Premium) -->
<aside id="sidebar"
    class="bg-sidebar w-72 h-screen flex flex-col fixed lg:static top-0 left-0 z-50 transform -translate-x-full lg:translate-x-0 transition-transform duration-300 ease-in-out shadow-2xl border-r border-white/5">
    
    <!-- Logo -->
    <div class="h-24 flex items-center px-8 border-b border-white/5 relative overflow-hidden group">
        <div class="absolute inset-0 bg-gradient-to-r from-primary/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"></div>
        <i class="fas fa-cube text-3xl text-primary mr-3 drop-shadow-lg"></i>
        <h1 class="text-2xl font-bold text-white tracking-wide">
            Propel
        </h1>
    </div>

    <!-- Nav List -->
    <nav class="flex-1 px-4 py-8 space-y-2 overflow-y-auto custom-scrollbar">
        
        <!-- Dashboard -->
        <a href="/"
            class="flex items-center px-4 py-3.5 rounded-xl transition-all duration-300 group
            {% if request.path == '/' %}bg-primary text-white shadow-glow{% else %}text-slate-400 hover:text-white hover:bg-white/5{% endif %}">
            <i class="fas fa-th-large w-6 transition-transform group-hover:scale-110"></i>
            <span class="font-medium tracking-wide">Dashboard</span>
        </a>

        <!-- BI -->
        <a href="{% url 'bi_dashboard' %}"
            class="flex items-center px-4 py-3.5 rounded-xl transition-all duration-300 group
            {% if '/bi/' in request.path %}bg-primary text-white shadow-glow{% else %}text-slate-400 hover:text-white hover:bg-white/5{% endif %}">
            <i class="fas fa-chart-line w-6 transition-transform group-hover:scale-110"></i>
            <span class="font-medium tracking-wide">Inteligencia</span>
        </a>

        <div class="px-4 pt-6 pb-2 text-xs font-bold text-slate-500 uppercase tracking-wider">Módulos</div>

        <a href="{% url 'product_list' %}"
            class="flex items-center px-4 py-3.5 rounded-xl transition-all duration-300 group
            {% if '/inventory/' in request.path and '/ingredients/' not in request.path and '/intelligence/' not in request.path %}bg-primary text-white shadow-glow{% else %}text-slate-400 hover:text-white hover:bg-white/5{% endif %}">
            <i class="fas fa-boxes w-6 transition-transform group-hover:scale-110"></i>
            <span class="font-medium tracking-wide">Inventario</span>
        </a>

        <!-- Raw Materials -->
        <a href="{% url 'ingredient_list' %}"
            class="flex items-center px-4 py-3.5 rounded-xl transition-all duration-300 group
            {% if '/inventory/ingredients/' in request.path %}bg-primary text-white shadow-glow{% else %}text-slate-400 hover:text-white hover:bg-white/5{% endif %}">
            <i class="fas fa-leaf w-6 transition-transform group-hover:scale-110"></i>
            <span class="font-medium tracking-wide">Materia Prima</span>
        </a>

        <!-- Sales -->
        <!-- Sales -->
        <a href="{% url 'sales_dashboard' %}"
            class="flex items-center px-4 py-3.5 rounded-xl transition-all duration-300 group
            {% if '/sales/' in request.path %}bg-primary text-white shadow-glow{% else %}text-slate-400 hover:text-white hover:bg-white/5{% endif %}">
            <i class="fas fa-shopping-cart w-6 transition-transform group-hover:scale-110"></i>
            <span class="font-medium tracking-wide">Ventas</span>
        </a>


        <!-- Finance Group -->
        <div class="px-4 pt-6 pb-2 text-xs font-bold text-slate-500 uppercase tracking-wider">Finanzas</div>

        <a href="{% url 'accounting_ledger' %}"
            class="flex items-center px-4 py-3.5 rounded-xl transition-all duration-300 group
            {% if '/accounting/' in request.path %}bg-primary text-white shadow-glow{% else %}text-slate-400 hover:text-white hover:bg-white/5{% endif %}">
            <i class="fas fa-book w-6 transition-transform group-hover:scale-110"></i>
            <span class="font-medium tracking-wide">Libro Diario</span>
        </a>

        <a href="{% url 'cashflow_dashboard' %}"
            class="flex items-center px-4 py-3.5 rounded-xl transition-all duration-300 group
            {% if '/finance/dashboard/' in request.path %}bg-primary text-white shadow-glow{% else %}text-slate-400 hover:text-white hover:bg-white/5{% endif %}">
            <i class="fas fa-wallet w-6 transition-transform group-hover:scale-110"></i>
            <span class="font-medium tracking-wide">Caja Real (Cashflow)</span>
        </a>

        <a href="{% url 'aging_dashboard' %}"
            class="flex items-center px-4 py-3.5 rounded-xl transition-all duration-300 group
            {% if '/finance/aging/' in request.path %}bg-primary text-white shadow-glow{% else %}text-slate-400 hover:text-white hover:bg-white/5{% endif %}">
            <i class="fas fa-hand-holding-usd w-6 transition-transform group-hover:scale-110"></i>
            <span class="font-medium tracking-wide">Deudas y Cobros</span>
        </a>

        <a href="{% url 'fixed_cost_list' %}"
            class="flex items-center px-4 py-3.5 rounded-xl transition-all duration-300 group
            {% if '/finance/costs/' in request.path %}bg-primary text-white shadow-glow{% else %}text-slate-400 hover:text-white hover:bg-white/5{% endif %}">
            <i class="fas fa-chart-pie w-6 transition-transform group-hover:scale-110"></i>
            <span class="font-medium tracking-wide">Gastos Fijos</span>
        </a>

        <a href="{% url 'asset_list' %}"
            class="flex items-center px-4 py-3.5 rounded-xl transition-all duration-300 group
            {% if '/finance/assets/' in request.path %}bg-primary text-white shadow-glow{% else %}text-slate-400 hover:text-white hover:bg-white/5{% endif %}">
            <i class="fas fa-building w-6 transition-transform group-hover:scale-110"></i>
            <span class="font-medium tracking-wide">Bienes de Uso</span>
        </a>


        <!-- HR -->
        <a href="{% url 'employee_list' %}"
            class="flex items-center px-4 py-3.5 rounded-xl transition-all duration-300 group
            {% if '/hr/' in request.path %}bg-primary text-white shadow-glow{% else %}text-slate-400 hover:text-white hover:bg-white/5{% endif %}">
            <i class="fas fa-users-cog w-6 transition-transform group-hover:scale-110"></i>
            <span class="font-medium tracking-wide">Recursos Humanos</span>
        </a>

        <!-- Proveedores (Shortcut) -->
        <a href="{% url 'provider_list' %}"
            class="flex items-center px-4 py-3.5 rounded-xl transition-all duration-300 group
            {% if '/finance/providers/' in request.path %}bg-primary text-white shadow-glow{% else %}text-slate-400 hover:text-white hover:bg-white/5{% endif %}">
            <i class="fas fa-truck w-6 transition-transform group-hover:scale-110"></i>
            <span class="font-medium tracking-wide">Proveedores</span>
        </a>

        <!-- Operations Group -->
        <div class="px-4 pt-6 pb-2 text-xs font-bold text-slate-500 uppercase tracking-wider">Operaciones</div>

        <a href="{% url 'production_order_list' %}"
            class="flex items-center px-4 py-3.5 rounded-xl transition-all duration-300 group
            {% if '/production/orders/' in request.path %}bg-primary text-white shadow-glow{% else %}text-slate-400 hover:text-white hover:bg-white/5{% endif %}">
            <i class="fas fa-industry w-6 transition-transform group-hover:scale-110"></i>
            <span class="font-medium tracking-wide">Producción</span>
        </a>

        <a href="{% url 'bom_list' %}"
            class="flex items-center px-4 py-3.5 rounded-xl transition-all duration-300 group
            {% if '/production/formulas/' in request.path %}bg-primary text-white shadow-glow{% else %}text-slate-400 hover:text-white hover:bg-white/5{% endif %}">
            <i class="fas fa-flask w-6 transition-transform group-hover:scale-110"></i>
            <span class="font-medium tracking-wide">Fórmulas</span>
        </a>

        <a href="{% url 'delivery_route_list' %}"
            class="flex items-center px-4 py-3.5 rounded-xl transition-all duration-300 group
            {% if '/logistics/' in request.path %}bg-primary text-white shadow-glow{% else %}text-slate-400 hover:text-white hover:bg-white/5{% endif %}">
            <i class="fas fa-truck-loading w-6 transition-transform group-hover:scale-110"></i>
            <span class="font-medium tracking-wide">Logística</span>
        </a>

    </nav>

    <!-- Footer / User -->
    <div class="p-6 border-t border-white/5">
        <div class="bg-white/5 rounded-2xl p-4 flex items-center gap-3 hover:bg-white/10 transition-colors cursor-pointer border border-white/5 group relative overflow-hidden">
            <div class="absolute inset-0 bg-gradient-to-r from-primary/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"></div>
            
            <div class="w-10 h-10 rounded-full bg-gradient-to-tr from-cyan-400 to-blue-500 flex items-center justify-center text-white font-bold shadow-lg z-10">
                {{ request.user.username|make_list|first|upper }}
            </div>
            <div class="flex-1 overflow-hidden z-10">
                <h4 class="text-sm font-bold text-white truncate">{{ request.user.username|title }}</h4>
                <p class="text-xs text-slate-400 truncate">Administrator</p>
            </div>
            <a href="{% url 'logout' %}" class="text-slate-400 hover:text-red-400 transition-colors z-10">
                <i class="fas fa-sign-out-alt"></i>
            </a>
        </div>
    </div>
</aside>